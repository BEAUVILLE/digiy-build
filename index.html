<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover"/>
  <meta name="theme-color" content="#061b14"/>
  <title>DIGIY BUILD PRO ‚Äî G√©n√©rateur de fiche</title>

  <!-- CSS -->
  <link rel="stylesheet" href="./build-gen.css?v=build-pro-gen-v2"/>

  <!-- Supabase + Guard -->
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <script src="./guard.js?v=build-pro-gen-v2"></script>

  <!-- JS (defer) -->
  <script defer src="./build-gen.js?v=build-pro-gen-v2"></script>
</head>

<body>
  <div id="guard_status">üîê V√©rification‚Ä¶</div>

  <div class="app">
    <div class="wrap">
      <div class="card">
        <h1>üèóÔ∏è G√©n√©rateur de fiche ‚Äî BUILD</h1>
        <p>
          Ici tu cr√©es / mets √† jour ta fiche publique.
          <span class="ok">Si tu publies</span> ‚Üí tu apparais dans la vitrine automatiquement.
        </p>

        <div class="hr"></div>

        <div class="row">
          <div>
            <label>Nom affich√© (display_name)</label>
            <input id="display_name" placeholder="Ex: Helage" />
          </div>
          <div>
            <label>Ville / Zone</label>
            <input id="city" placeholder="Ex: Saly ‚Äì Petite C√¥te" />
          </div>
        </div>

        <div class="row">
          <div>
            <label>M√©tier (trade)</label>
            <input id="trade" placeholder="Ex: Plombier multi-services" />
          </div>
          <div>
            <label>R√©gion (region)</label>
            <select id="region">
              <option value="petite-cote">petite-cote</option>
              <option value="dakar">dakar</option>
              <option value="thies">thies</option>
              <option value="national">national</option>
            </select>
          </div>
        </div>

        <div class="row">
          <div>
            <label>WhatsApp (sans espaces)</label>
            <input id="whatsapp" placeholder="Ex: 221774513523" />
          </div>
          <div>
            <label>T√©l√©phone (optionnel)</label>
            <input id="phone" placeholder="Ex: +221..." />
          </div>
        </div>

        <label>Bio (courte, claire)</label>
        <textarea id="bio" placeholder="Ex: D√©pannage, installation, chauffe-eau, fuite, WC, douche‚Ä¶"></textarea>

        <div class="row">
          <div>
            <label>Photo vitrine (photo_url)</label>
            <input id="photo_url" placeholder="URL image (https://...png/jpg)" />
          </div>
          <div>
            <label>URL fiche (profile_url)</label>
            <input id="profile_url" placeholder="https://digiylyfe.com/partenaires-..." />
          </div>
        </div>

        <div class="row">
          <div>
            <label>Badge (ex: ‚ö° Intervention rapide)</label>
            <input id="badge" placeholder="Ex: üõ†Ô∏è Intervention rapide" />
          </div>
          <div>
            <label>Hub badge (ex: ‚úÖ PARTENAIRE BUILD)</label>
            <input id="hub_badge" placeholder="Ex: ‚úÖ PARTENAIRE BUILD" />
          </div>
        </div>

        <div class="row">
          <div>
            <label>Price label</label>
            <input id="price_label" placeholder="Ex: 0% commission" />
          </div>
          <div>
            <label>Tags (JSON ou liste simple)</label>
            <input id="tags" placeholder='Ex: pos,build,btp ou ["build","btp"]' />
          </div>
        </div>

        <div class="row">
          <div>
            <label>Priorit√© (0‚Äì100)</label>
            <input id="priority" type="number" min="0" max="100" value="1" />
          </div>
          <div>
            <label>Publier maintenant ?</label>
            <select id="is_published">
              <option value="true">Oui (visible)</option>
              <option value="false">Non (brouillon)</option>
            </select>
          </div>
        </div>

        <div class="hr"></div>

        <div class="actions">
          <button class="btn primary" id="btnSave" type="button">üíæ Enregistrer la fiche</button>
          <a class="btn secondary" id="btnOpenListing" href="./listing.html">üë∑ Ouvrir la vitrine</a>
          <button class="btn ghost" id="btnBack" type="button">‚Ü©Ô∏è Retour cockpit</button>
        </div>

        <div class="note" id="msg">
          Statut : ‚Äî
        </div>
      </div>
    </div>
  </div>
</body>
</html>
