<script>
/* =============================
   NAV (simple + solide)
   ============================= */
(function(){
  // Fix GitHub Pages: Ã©vite /digiy-build/digiy-build/...
  if(location.pathname.includes("/digiy-build/digiy-build/")){
    location.replace(location.pathname.replace("/digiy-build/digiy-build/", "/digiy-build/") + location.search + location.hash);
    return;
  }

  const base = new URL("./", location.href); // dossier du site

  // Liens fixes (pas de fetch, pas de surprise)
  const requestUrl  = new URL("request.html", base).href;
  const demandesUrl = new URL("demandes.html", base).href;
  const cockpitUrl  = new URL("build-pro/pin.html", base).href;

  const slug = new URL(location.href).searchParams.get("slug");

  const btnRequest = document.getElementById("btnRequest");
  if(btnRequest) btnRequest.href = requestUrl;

  const btnDemandes = document.getElementById("btnDemandes");
  if(btnDemandes) btnDemandes.href = demandesUrl;

  const btnDemandesCta = document.getElementById("btnDemandesCta");
  if(btnDemandesCta) btnDemandesCta.href = demandesUrl;

  const btnCockpit = document.getElementById("btnCockpit");
  if(btnCockpit){
    if(slug){
      const u = new URL(cockpitUrl);
      u.searchParams.set("slug", slug);
      btnCockpit.href = u.href;
    }else{
      btnCockpit.href = cockpitUrl;
    }
  }
})();
</script>
